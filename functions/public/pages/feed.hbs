<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="../img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="css/login.css">
    <link type="text/css" rel="stylesheet" href="css/fontawesome.css">
    <link type="text/css" rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js" defer ></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-auth.js" defer ></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js" defer ></script>
    <title>Feed</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
       <a style="padding-left:1.0rem" class="navbar-brand">NHL Now</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarText">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/home">Home</a>
      </li>
    </ul>
    <div class="navbar-nav ms-auto">
          <a style="padding-right:1.2rem"class="nav-link" href="" id="btnSignout">Logout </a>
      </div>
  </div>
</nav>
<div class="container text-center">
      <div class="row ">
          <div class="col-md-6 mx-auto">
            <div class="card card-body bg-light mt-5">
              <h1>NHL Feed</h1>
              <div id="date"></div>
          </div>
          </div>
      </div>
        <div class="slide" style="background-color:#b1b1b1">
        <div class="row" style="padding-left:20vmin; padding-top:10vmin; padding-bottom:2vmin;">
            <div class="col-sm">  
                <div id="game1"></div>
            </div>
        </div>
      </div>
      <div class="slide" style="background-color:#b1b1b1">
        <div class="row" style="padding-left:20vmin; padding-top:10vmin; padding-bottom:2vmin;">
            <div class="col-sm">  
                <div id="game2"></div>
            </div>
        </div>
      </div>
      <div class="slide" style="background-color:#b1b1b1">
        <div class="row" style="padding-left:20vmin; padding-top:10vmin; padding-bottom:2vmin;">
            <div class="col-sm">  
                <div id="game3"></div>
            </div>
        </div>
      </div>
      <div class="slide" style="background-color:#b1b1b1">
        <div class="row" style="padding-left:20vmin; padding-top:10vmin; padding-bottom:2vmin;">
            <div class="col-sm">  
                <div id="game4"></div>
            </div>
        </div>
      </div>
      <div class="slide" style="background-color:#b1b1b1">
        <div class="row" style="padding-left:20vmin; padding-top:10vmin; padding-bottom:2vmin;">
            <div class="col-sm">  
                <div id="game5"></div>
            </div>
        </div>
      </div>
</div>
  </body>
  <script>
    async function createNHLStatsList(){
        const response = await fetch('https://nhl-score-api.herokuapp.com/api/scores/latest');
        const statsList = await response.json();

        document.getElementById('date').innerHTML = 
        `<h2>Date of games: ${statsList.date.pretty}</h2>`;
      
        //GAME 1
        let awayAbbreviation = `${statsList.games[0].teams.away.abbreviation}`
        let homeAbbreviation = `${statsList.games[0].teams.home.abbreviation}`
        let homeScore = await createNHLScoresList(0, homeAbbreviation, statsList);
        let awayScore = await createNHLScoresList(0, awayAbbreviation, statsList);
        document.getElementById('game1').innerHTML = 
        `<h3>Game 1: ${statsList.games[0].teams.away.locationName} ${statsList.games[0].teams.away.teamName} at 
            ${statsList.games[0].teams.home.locationName} ${statsList.games[0].teams.home.teamName}</h3>
            <h3>Scores: ${statsList.games[0].teams.away.locationName} ${awayScore} -
                ${statsList.games[0].teams.home.locationName} ${homeScore}</h3>
                <h3>Status: ${statsList.games[0].status.state}</h3>`;
        
        //GAME 2
        awayAbbreviation = `${statsList.games[1].teams.away.abbreviation}`
        homeAbbreviation = `${statsList.games[1].teams.home.abbreviation}`
        homeScore = await createNHLScoresList(1, homeAbbreviation, statsList);
        awayScore = await createNHLScoresList(1, awayAbbreviation, statsList);
        document.getElementById('game2').innerHTML = 
        `<h3>Game 2: ${statsList.games[1].teams.away.locationName} ${statsList.games[1].teams.away.teamName} at 
            ${statsList.games[1].teams.home.locationName} ${statsList.games[1].teams.home.teamName}</h3>
            <h3>Scores: ${statsList.games[1].teams.away.locationName} ${awayScore} -
                ${statsList.games[1].teams.home.locationName} ${homeScore}</h3>
                <h3>Status: ${statsList.games[1].status.state}</h3>`;

        //GAME 3
        awayAbbreviation = `${statsList.games[2].teams.away.abbreviation}`
        homeAbbreviation = `${statsList.games[2].teams.home.abbreviation}`
        homeScore = await createNHLScoresList(2, homeAbbreviation, statsList);
        awayScore = await createNHLScoresList(2, awayAbbreviation, statsList);
        document.getElementById('game3').innerHTML = 
        `<h3>Game 3: ${statsList.games[2].teams.away.locationName} ${statsList.games[2].teams.away.teamName} at 
            ${statsList.games[2].teams.home.locationName} ${statsList.games[2].teams.home.teamName}</h3>
            <h3>Scores: ${statsList.games[2].teams.away.locationName} ${awayScore} -
                ${statsList.games[2].teams.home.locationName} ${homeScore}</h3>
                <h3>Status: ${statsList.games[2].status.state}</h3>`;

        //GAME 4
        awayAbbreviation = `${statsList.games[3].teams.away.abbreviation}`
        homeAbbreviation = `${statsList.games[3].teams.home.abbreviation}`
        homeScore = await createNHLScoresList(3, homeAbbreviation, statsList);
        awayScore = await createNHLScoresList(3, awayAbbreviation, statsList);
        document.getElementById('game4').innerHTML = 
        `<h3>Game 4: ${statsList.games[3].teams.away.locationName} ${statsList.games[3].teams.away.teamName} at 
            ${statsList.games[3].teams.home.locationName} ${statsList.games[3].teams.home.teamName}</h3>
            <h3>Scores: ${statsList.games[3].teams.away.locationName} ${awayScore} -
                ${statsList.games[3].teams.home.locationName} ${homeScore}</h3>
                <h3>Status: ${statsList.games[3].status.state}</h3>`;

        //GAME 5
        awayAbbreviation = `${statsList.games[4].teams.away.abbreviation}`
        homeAbbreviation = `${statsList.games[4].teams.home.abbreviation}`
        homeScore = await createNHLScoresList(4, homeAbbreviation, statsList);
        awayScore = await createNHLScoresList(4, awayAbbreviation, statsList);
        document.getElementById('game5').innerHTML = 
        `<h3>Game 5: ${statsList.games[4].teams.away.locationName} ${statsList.games[4].teams.away.teamName} at 
            ${statsList.games[4].teams.home.locationName} ${statsList.games[4].teams.home.teamName}</h3>
            <h3>Scores: ${statsList.games[4].teams.away.locationName} ${awayScore} -
                ${statsList.games[4].teams.home.locationName} ${homeScore}</h3>
                <h3>Status: ${statsList.games[4].status.state}</h3>`;

    }

    createNHLStatsList();

async function createNHLScoresList(gameNum, teamAb, statsList){
    
    let num = '';

    if(teamAb === 'ANA'){
        num = `${statsList.games[gameNum].scores.ANA}`
    }
    else if(teamAb === 'ARI'){
        num = `${statsList.games[gameNum].scores.ARI}`
    }
    else if(teamAb === 'BOS'){
        num = `${statsList.games[gameNum].scores.BOS}`
    }
    else if(teamAb === 'BUF'){
        num = `${statsList.games[gameNum].scores.BUF}`
    }
    else if(teamAb === 'CAR'){
        num = `${statsList.games[gameNum].scores.CAR}`
    }
    else if(teamAb === 'CBJ'){
        num = `${statsList.games[gameNum].scores.CBJ}`
    }
    else if(teamAb === 'CGY'){
        num = `${statsList.games[gameNum].scores.CGY}`
    }
    else if(teamAb === 'CHI'){
        num = `${statsList.games[gameNum].scores.CHI}`
    }
    else if(teamAb === 'COL'){
        num = `${statsList.games[gameNum].scores.COL}`
    }
    else if(teamAb === 'DAL'){
        num = `${statsList.games[gameNum].scores.DAL}`
    }
    else if(teamAb === 'DET'){
        num = `${statsList.games[gameNum].scores.DET}`
    }
    else if(teamAb === 'EDM'){
        num = `${statsList.games[gameNum].scores.EDM}`
    }
    else if(teamAb === 'FLA'){
        num = `${statsList.games[gameNum].scores.FLA}`
    }
    else if(teamAb === 'LAK'){
        num = `${statsList.games[gameNum].scores.LAK}`
    }
    else if(teamAb === 'MIN'){
        num = `${statsList.games[gameNum].scores.MIN}`
    }
    else if(teamAb === 'MTL'){
        num = `${statsList.games[gameNum].scores.MTL}`
    }
    else if(teamAb === 'NJD'){
        num = `${statsList.games[gameNum].scores.NJD}`
    }
    else if(teamAb === 'NSH'){
        num = `${statsList.games[gameNum].scores.NSH}`
    }
    else if(teamAb === 'NYI'){
        num = `${statsList.games[gameNum].scores.NYI}`
    }
    else if(teamAb === 'NYR'){
        num = `${statsList.games[gameNum].scores.NYR}`
    }
    else if(teamAb === 'OTT'){
        num = `${statsList.games[gameNum].scores.OTT}`
    }
    else if(teamAb === 'PHI'){
       num = `${statsList.games[gameNum].scores.PHI}`
    }
    else if(teamAb === 'PIT'){
        num = `${statsList.games[gameNum].scores.PIT}`
    }
    else if(teamAb === 'SEA'){
        num = `${statsList.games[gameNum].scores.SEA}`
    }
    else if(teamAb === 'STL'){
        num = `${statsList.games[gameNum].scores.STL}`
    }
    else if(teamAb === 'SJS'){
        num = `${statsList.games[gameNum].scores.SJS}`
    }
    else if(teamAb === 'TBL'){
        num = `${statsList.games[gameNum].scores.TBL}`
    }
    else if(teamAb === 'TOR'){
        num = `${statsList.games[gameNum].scores.TOR}`
    }
    else if(teamAb === 'VAN'){
        num = `${statsList.games[gameNum].scores.VAN}`
    }
    else if(teamAb === 'VGK'){
        num = `${statsList.games[gameNum].scores.VGK}`
    }
    else if(teamAb === 'WPG'){
        num = `${statsList.games[gameNum].scores.WPG}`
    }
    else{
        num = `${statsList.games[gameNum].scores.WSH}`
    }
    return num;
}

  </script>
   <script src="/bundle.js"></script>
</html>